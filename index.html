---
---

<div class="jumbotron">
    <div class="container">
        <noscript>
            <div class="alert alert-danger" role="alert">
                <strong>Uh oh!</strong> JavaScript is disabled or not supported. This site won't work. Go away!
            </div>
        </noscript>
        <h1>
            <span id="currently">It is currently week <strong><span id="weekNum">...</span></strong></span> at <span class="ritLogo">RIT</span>.
        </h1>
        <p class="text-danger" id="broken" style="display: none;">
            Email Corban Mailloux (whatweekisitatRIT@corb.co) to make me fix it.
        </p>
        <p>
            <strong>Note:</strong> This value updates on <strong>Mondays</strong>, and is not guaranteed to be accurate.
        </p>
        <p>
            <small>Please don't be mad at me.</small>
        </p>
    </div>
</div>


<script>
    function setCookie(cname, cvalue, date) {
        var expires = "expires=" + date.toUTCString();
        document.cookie = cname + "=" + cvalue + "; " + expires;
    }

    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1);
            if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
        }
        return "";
    }

    function checkCookie(name) {
        var cookie = getCookie(name);
        return (cookie != "");
    }

    function dateInTheFuture(date)
    {
        return (now.getTime() < date.getTime());
    }

    function checkAndSet(dateString)
    {
        var date = new Date(dateString);

        if (dateInTheFuture(date))
        {
            if (checkCookie(name))
            {
                times = parseInt(getCookie(name), 10) + 1;
            }

            setCookie(name, times, date);

            return true;
        }
        return false;
    }


    var now = new Date();
    var week;
    var times = 1;
    var name = "HowManyTimesHaveYouCheckedThisWeek";

    if (checkAndSet("2015-11-01"))
    {
        week = -1;
    }
    else if (checkAndSet("2015-11-09"))
    {
        week = 11;
    }
    else if (checkAndSet("2015-11-15"))
    {
        week = 12;
    }
    else if (checkAndSet("2015-11-22"))
    {
        week = 13;
    }
    else if (checkAndSet("2015-11-29"))
    {
        week = 14;
    }
    else if (checkAndSet("2015-12-06"))
    {
        week = 15;
    }
    else if (checkAndSet("2015-12-13"))
    {
        week = 16;
    }
    else
    {
        week = -2;
    }

    if (week > 0)
    {
        document.getElementById("weekNum").innerHTML = week;
        document.title = "Week " + week + " - {{ site.title}}"

        document.write("You've visited this site <strong>" + times + "</strong> time" + ((times == 1) ? "" : "s") + " this academic week.")
    }
    else
    {
        document.getElementById("currently").innerHTML = "I don't know what week it is";
        document.getElementById("broken").style.display = "block";
        document.title = "{{ site.title}}"

        // Expire the cookie
        setCookie(name, times, new Date("2000-01-01"));
    }
</script>
